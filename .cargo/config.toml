[build]
target = "thumbv6m-none-eabi"

[target.thumbv6m-none-eabi]
linker = "flip-link" # Use the Ferrous Systems linker wrapper. (flip-link) Or use the integrated Rust LLD linker (rust-lld).
rustflags = [
  "-C", "link-arg=--nmagic",
  "-C", "link-arg=-Tlink.x", # link.x might be found in crate cortex-m-rt or rp2040-hal
  "-C", "link-arg=-Tdefmt.x", # defmt.x generated by the defmt build script at temporal compilation folder. 
  "-C", "no-vectorize-loops",
]
runner = "probe-rs run --chip RP2040 --protocol swd"

[unstable]
build-std = ["core", "compiler_builtins"]

[env]
DEFMT_LOG = "debug"
